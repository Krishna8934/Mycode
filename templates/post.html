{% extends 'base.html' %}
{% block content %}

<h3>#{{ post['problem_no'] }} - {{ post['title'] }}</h3>
<p><em>By {{ post['username'] }} on {{ post['date'] }}</em></p>

{% if post['image'] %}
    <!-- Cloudinary image direct load -->
    <img src="{{ post['image'] }}" width="400">
{% endif %}

<pre class="bg-light p-2 mt-3"><code>{{ post['code'] }}</code></pre>

{% if post['notes'] %}
<p><strong>Notes:</strong> {{ post['notes'] }}</p>
{% endif %}

<p><strong>Share Link:</strong> 
    <a href="{{ request.url }}">{{ request.url }}</a>
</p>

{% if session.get('user_id') == post['user_id'] %}

<!-- â­ EDIT BUTTON -->
<a href="{{ url_for('edit_post', post_id=post['id']) }}" 
   class="btn btn-primary mt-3">
    âœï¸ Edit Post
</a>

<!-- ğŸ—‘ DELETE BUTTON -->
<form action="{{ url_for('delete_post', post_id=post['id']) }}" 
      method="POST" 
      onsubmit="return confirm('Are you sure you want to delete this post?');" 
      class="mt-3">
    <button type="submit" class="btn btn-danger">ğŸ—‘ Delete This Post</button>
</form>

{% endif %}

{% endblock %}
